import{W as p,S as f,C as L,P as x,G as P,a as b,A as C,D as F,b as z}from"./GLTFLoader-DwKRNB9j.js";class D{constructor(e,t){this.data=e,this.key=t}setData(e,t){localStorage.setItem(e,JSON.stringify(t)),this.key=e,this.data=t}getData(e,t){return localStorage.getItem(e)?(this.key=e,this.data=JSON.parse(localStorage.getItem(e)),this.data):this.setData(e,t)}changeDataField(e,t){this.data[e]=t,this.setData(this.key,this.data)}getField(e){return this.data[e]}}const s=new D;s.getData("settings",{sens:1,invert:!1,fov:75});setTimeout(()=>{S(s.data.sens,s.data.invert,s.data.fov),M(s.data.fov)},100);const H=document.getElementById("bgCanvas"),m=new p({canvas:H,alpha:!1});m.setSize(window.innerWidth,window.innerHeight);m.setPixelRatio(window.devicePixelRatio);const y=new f;y.background=new L(328965);const c=new x(75,window.innerWidth/window.innerHeight,.1,1e3);c.position.z=30;function k(){requestAnimationFrame(k),m.render(y,c)}k();const a=document.getElementById("settingsPreview"),v=new p({canvas:a,alpha:!0});v.setSize(a.clientWidth,a.clientHeight);v.setPixelRatio(window.devicePixelRatio);const r=new f;r.background=new L(657930);const i=new x(75,a.clientWidth/a.clientHeight,.01,1e3);i.position.set(3,2,5);i.lookAt(0,0,0);function W(){const n=new C(4210752);r.add(n);const e=new F(16746632,1);e.position.set(2,3,4),r.add(e);const t=new z(16711680,2);t.position.set(2,1,3),r.add(t)}let I;A();W();const B=new P(20,20,16711680,3355443);r.add(B);const o={yaw:0,pitch:0,sensitivity:.002,isLocked:!1};document.addEventListener("pointerlockchange",u);document.addEventListener("mozpointerlockchange",u);document.addEventListener("webkitpointerlockchange",u);function u(){o.isLocked=document.pointerLockElement===a}function R(n){if(!o.isLocked)return;const e=n.movementX||n.mozMovementX||n.webkitMovementX||0,t=n.movementY||n.mozMovementY||n.webkitMovementY||0;o.yaw-=e*o.sensitivity*s.data.sens*(s.data.invert?-1:1),o.pitch-=t*o.sensitivity*s.data.sens*(s.data.invert?-1:1),o.pitch=Math.max(-Math.PI/2,Math.min(Math.PI/2,o.pitch)),i.rotation.x=0,i.rotation.y=0,i.rotation.z=0,i.rotation.order="YXZ",i.rotation.y=o.yaw,i.rotation.x=o.pitch}function A(){new b().load("./models/enemy.glb",e=>{const t=e.scene;t.scale.set(.2,.2,.2),t.position.set(0,0,0),t.rotation.y=Math.PI/4,t.traverse(d=>{d.isMesh&&d.isMesh&&(d.castShadow=!1,d.receiveShadow=!1)}),I=t,r.add(t)},void 0,e=>{console.error("Error loading preview model:",e)})}function M(n){i.fov=n,i.updateProjectionMatrix()}function X(n){a.requestPointerLock(),n.preventDefault()}function E(){requestAnimationFrame(E),I.rotation.y+=.01,v.render(r,i)}setTimeout(()=>{E()},100);const Y=document.getElementById("sensValue"),h=document.getElementById("sensitivity"),G=document.getElementById("fovValue"),l=document.getElementById("fov"),w=document.getElementById("mouseInvert");a.addEventListener("click",X);a.addEventListener("mousemove",R);function S(n,e,t){Y.textContent=parseFloat(n).toFixed(1),G.textContent=parseFloat(t).toFixed(1),h.value=n,l.value=t,w.checked=e}function g(){const n=h.value,e=w.checked,t=l.value;S(n,e,t),s.setData("settings",{sens:parseFloat(n),invert:e,fov:parseFloat(t)})}h.addEventListener("input",g);l.addEventListener("input",()=>{M(l.value),g()});w.addEventListener("change",g);window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight);const n=a.clientWidth,e=a.clientHeight;v.setSize(n,e),i.aspect=n/e,i.updateProjectionMatrix()});
